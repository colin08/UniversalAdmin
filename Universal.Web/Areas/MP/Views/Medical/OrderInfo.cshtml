@model Universal.Entity.OrderMedical
@{
    ViewBag.Title = "订单详情";
}

<!-- 头部Style等 -->
@section htmlhead{   
<style>
    .content-title { margin-top: 10px; }

    .order_status p { font-size: 18px; }
    
    .tt-item { display: flex; align-items: center; justify-content:space-between;}
    .tt-item img { margin-left: 5px; width: 20px; height: 20px; }

    .Head p{
        display:flex;
        align-items:center;
    }
</style>



}
<!-- 头部Style等 END -->


<!-- MUI 头部导航栏设置 -->
@section muiheader{
<div class="mui-navbar-inner mui-bar mui-bar-nav">
    <button type="button" onclick="javascript:location.href='OrderList'" class="mui-left mui-action-back mui-btn  mui-btn-link mui-btn-nav mui-pull-left">
        <span class="mui-icon mui-icon-left-nav"></span>
    </button>
    <h1 class="mui-center mui-title">订单详情</h1>
</div>

}
<!-- MUI 头部导航栏设置 END -->


<!-- Body -->

<div class="mui-content-padded">
    <div class="Head">
        
        <p>订单时间：@Model.AddTime.ToString("yyyy-MM-dd HH:mm")</p>
        <p>订单编号：@Model.OrderNum</p>
        <p>订单价格：￥@Model.Amount.ToString("F2")</p>
        <p>实付价格：￥@Model.RelAmount.ToString("F2")</p>
        <p>订单状态：
                @if(Model.Status == Universal.Entity.OrderStatus.临时订单)
                {
                    <button class="mui-btn-success mui-btn-outlined" onclick="location.href='GoBuy?mid=@Model.MedicalID&o=@Model.OrderNum&back=/MP/Medical/OrderInfo?o=@Model.OrderNum'">继续操作</button>
                }
                else if (Model.Status == Universal.Entity.OrderStatus.已取消)
                {
                    <button class="mui-btn mui-btn-outlined" disabled>已取消</button>
                }
                else if (Model.Status == Universal.Entity.OrderStatus.已完成)
                {
                    <button class="mui-btn mui-btn-outlined" disabled>已完成</button>
                }
                else if (Model.Status == Universal.Entity.OrderStatus.已支付)
                {
                    <button class="mui-btn mui-btn-outlined" disabled>已支付</button>
                }
                else if (Model.Status == Universal.Entity.OrderStatus.等待支付)
                {
                    <button class="mui-btn-warning mui-btn-outlined" onclick="location.href='/MP/Pay/OrderMedical?o=@Model.OrderNum&back=/MP/Medical/OrderInfo?o=@Model.OrderNum'">前往支付</button>
                }
            </p>
    </div>
</div>
<div class="mui-card custom-card">
    <div class="mui-card-header">@Model.Title</div>
    <div class="mui-card-header mui-card-media" style="height:40vw;background-image:url(@Model.ImgUrl)"></div>
    <div class="mui-card-content">
    </div>
</div>

<div class="mui-content-padded">
    @if (Model.Status != Universal.Entity.OrderStatus.临时订单)
    {
        <p>预约用户资料</p>
        <div class="mui-input-group">
            <div class="mui-input-row">
                <label>姓名</label>
                <input type="text" readonly="readonly" value="@Model.RealName" />
            </div>
            <div class="mui-input-row">
                <label>身份证号</label>
                <input type="text" readonly="readonly" value="@Model.IDCardNumber" />
            </div>
            <div class="mui-input-row">
                <label>手机号</label>
                <input type="text" readonly="readonly" value="@Model.Telphone" />
            </div>
            <div class="mui-input-row ">
                <label>性别</label>
                <input type="text" readonly="readonly" value="@ViewData["Gender"]" />
            </div>


            <div id="" class="mui-input-row">
                <label>出生日期</label>
                <input type="text" readonly="readonly" value="@Model.Brithday.ToShortDateString()" />
            </div>
            <div id="" class="mui-input-row" style="color: red;">
                <label>预约日期</label>
                <input type="text" readonly="readonly" value="@ViewData["YuYueStr"]" />
            </div>

        </div>
    }

    @if(Model.OrderMedicalItems.ToList().Where(p=>p.Type == Universal.Entity.OrderMedicalItemType.额外自选).Count()>0)
    {
        <p class="content-title">增加项(@Model.OrderMedicalItems.ToList().Where(p=>p.Type == Universal.Entity.OrderMedicalItemType.额外自选).Count()项)</p>
        <ul class="mui-table-view">
            @foreach (var item in Model.OrderMedicalItems.ToList().Where(p => p.Type == Universal.Entity.OrderMedicalItemType.额外自选).ToList())
            {
                <li class="mui-table-view-cell">
                    <div class="tt-item">
                        <span>@item.Title</span>
                        <img src="~/Assets/mui/img/icon-info-gray.png" onclick="showTips('@item.Desc',this)" />
                    </div>
                </li>
            }
        </ul>
    }

    <p class="content-title">套餐内项目(@Model.OrderMedicalItems.ToList().Where(p => p.Type == Universal.Entity.OrderMedicalItemType.套餐内).Count()项)</p>
    <ul class="mui-table-view">
        @foreach (var item in Model.OrderMedicalItems.ToList().Where(p => p.Type == Universal.Entity.OrderMedicalItemType.套餐内).ToList())
            {
            <li class="mui-table-view-cell">
                <div class="tt-item">
                    <span>@item.Title</span>
                    <img src="~/Assets/mui/img/icon-info-gray.png" onclick="showTips('@item.Desc',this)" />
                </div>
            </li>
        }
        
    </ul>

    <div class="mui-bar-footer mui-text-center" style="width: 100%;margin-top: 20px;">
        <p>@Html.Partial("~/Areas/MP/Views/Shared/_Copyright.cshtml")</p>
    </div>

</div>


<!-- Body END -->


<!-- MUI 底部导航栏设置 -->
@section muifooter{


}
<!-- MUI 底部导航栏设置 END -->



<!-- MUI 页面底部脚本 -->
@section htmlfoot{
<script src="~/Assets/mui/js/jquery.min.js"></script>
<script src="~/Assets/js/plugins/layer/layer.js"></script>
<script>
        function showTips(text,obj)
        {
            layer.tips(text, obj, 5);
        }
</script>

}
<!-- MUI 页面底部脚本 END -->

